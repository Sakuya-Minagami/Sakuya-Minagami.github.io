---
title: 难题日志
---
### 8-5
login界面和notes界面总是css冲突
网络上普遍回答是script加scoped
依然不起作用
### 8-7
登录函数出现不明问题，执行空函数都会刷新页面
注意到在新窗口打开button时，会在原页面执行函数，证明页面被刷新
### 8-9
接上回，原因是button按钮自动刷新页面
导致执行判空时未警告就刷新页面，登录函数无法执行
可换组件，如div等

感谢千锋群大佬解答
### 8-17
接8-5，原因是vue一直都只有单页面，对body渲染一定会覆盖掉一个
应该用对组件进行渲染
问题是之前试过这样的方法似乎不行，现在又可以了？
### 8-19
在写编辑部分时，想复用新增模块
但是最后的确认按钮要怎么区分是新增呢，还是编辑呢？
如果不复用，很多代码都重复，觉得很差劲

写编辑模块时，发现现有代码只能增删数组
无法实现对原有数组的访问，也就无法读内容并编辑

接上，发现并不能通过var vm = new Vue访问元素
但是在script中还是能操作数组的
### 8-20
页面的布局还需要细致考量
导航栏navbar可能会挡住notes界面，我希望它能够稳定占据左侧空白
顺便，写navbar时用的是v-show，却会把别的元素挤开，这应该是v-if的效果才对？

接上，二者并不是简单的存在与否区别
[v-if,v-show](https://blog.csdn.net/qq_45272642/article/details/124084924)

### 8-22
还是想把导航栏做成可以收纳的结构，但是会把笔记内容挤开
最致命的是笔记背景颜色和导航栏背景颜色重叠，很难看

还有就是笔记内容要对齐，要对应区域一样占位

突然发现日期出问题了，昨天显示7-0，今天显示7-1
仔细一翻，发觉前面的日期好像都有问题

接上，大笨蛋，函数用错了
getday()是星期，getDate()才是日期
然后月份从0开始，所以要+1
[JavaScript标准库/Date方法](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date/getMonth)

顺便一提，代码写的是
```
date: date.getFullYear() + '/' + date.getMonth()+1 + '/' + date.getDate()
```
getDate()方法传回的是数字，但在连加式中都会直接转为字符串，+1会直接变成字符加在后面
因此需要优先计算括号内容
```
date: date.getFullYear() + '/' + (date.getMonth()+1) + '/' + date.getDate()
```

## 查询与重写id
写到查询功能时，先考虑标题查询
可以复用模糊查询的代码，复习filter方法和includes方法
因为查询功能不一定生效，所以应该用两个数组存笔记
noteslist存原数组，datalist存查询后的显示数组，应有
```
this.noteslist = this.datalist.filter(item => item.includes(this.searchText))
```
并且该注意点查询按钮才生效，因此查询函数执行上述赋值动作

但是出现了新问题，操作数组依赖index，两个数组index显然不一致
考虑用使用id，顺便用id作为key值
这样的话要把id也装进数组，然后操作和显示都要替换，工作量就上来了......

思考一下，要替换的有
初始化id=0，每次add()，id+1
notes对象增加一项id，editNotes同理
显示部分datalist不变，增删编辑部分改为noteslist，改为依赖id修改
初始化datalist=noteslist，执行查询后重新赋值

### 8-23
昨晚开始部署项目到GitHub，早上又一个小时总算弄好了，结果页面一片空白
又查了一会发现改成hash模式就可以了

试图改代码了，先从数组装入id入手
很快就遇到问题，删除数组需要index而不是id
试着用es6的map方法通过id查找index，好麻烦，还是遍历吧
然后紧接着出现了不影响功能的报错
[Vue warn]: Error in v-on handler: "TypeError: Cannot read properties of undefined (reading 'id')"

接上，原来是在遍历前需要进行非空判断
特别地，因为一开始判断条件是
```
if(this.datalist[i] && this.datalist[i].id)
```
而id初始值是0，也就是说第一个笔记因为id为0无法过非空判断，无法删除
出于只是消除报错的目的，删掉了第二项非空判断

在编辑模块又犯傻，没有想清楚整个操作分为handleEdit和edit两个部分
在点击编辑时执行handleEdit，就要将id传给全局变量editId
edit部分不再使用传入的id而是全局变量this.editId

在查询模块时，构思
过滤函数fliter参数不使用文本值searchText，而是searchTitle
等到执行查询函数时再赋值
但修改searchTitle似乎并不能使页面及时更新。。

### 8-24
没有仔细看文档要求，发现还有文本框非法输入判定
想判定文本字符类型，顺便找到了判定元素类型的方法
```
var elt = document.getElementById('foo'); 
console.log(elt.nodeName);
elt.nodeName == "DIV"//判断式
```

### 8-25
文本框输入限制少不了学正则表达式，以后一定.jpg
给登录和笔记界面都加了限制，登录加了注册提示
查询按钮想放弃了。。

想起来忘了写路由守卫啦。。没登录注册验证把这回事都忘掉了

### 8-26
又把按种类查询忘掉了。。
思路上分三个选项，全部，笔记，会议，
就在标题查询的基础上再做一次fliter构造noteslist
顺便看了一下回调函数和箭头函数

### 8-27
因为主页，分组管理，个人信息只要求留空白页面，所以没多写
按照舍友的建议，点进去之后回到笔记页面不方便，所以也都写了导航栏
不过按照标准的构思，导航栏应该独立于四个页面
最开始构思的时候偷懒，把所有内容都写在笔记页面了
虽然。。也都能实现功能，也没有变得太过复杂繁琐就是了

出了点小bug。。输入框虽然限制了特殊字符，但是硬卡好像还是可以写进去，然后编辑时候又消失了
顺便补充了切换组件保留数据keep-alive

### 8-31
刚发现没法起新行写标题了，原来是上面的>是文本块的前缀，跳进文本块内容了
[markdown](https://www.acwing.com/file_system/file/content/whole/index/content/2386144/)

然后说回正事，之前的尝试似乎出了问题，查询功能可以简单实现
今天再试着琢磨了一下，computed确实会随着data内容更新而更新
按钮延时查询是可行的，但是之前的代码可能写错了，又没有报错，让我误以为无法更新。。

笨蛋。。看了一下导航栏代码，发现
opacity写成apacity，透明效果没了