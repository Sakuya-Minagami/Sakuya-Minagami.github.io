---
title: 想记什么记什么
---
# 浏览器输入URL发生了什么？
1.输入地址，先依次判断浏览器、操作系统、本地文件hosts中是否有有效期内的，与域名相关的DNS缓存，若有则不需要DNS解析，否则DNS解析得出ip地址。
2.浏览器向ip地址指向的web服务器建立TCP链接，判断是否是HTTP缓存，如果是强制缓存且在有效期内，不再向服务器发请求。 
3.浏览器向web服务器发送HTTP请求，如果是HTTP协商缓存向后端发送请求且和后端服务器对比，在有效期内，服务器返回304，直接从浏览器获取数据，如果不在有效期内服务器返回200，返回新数据。服务器若返回重定向，则浏览器再按照重定向的地址重新发送请求。 如果请求的参数有问题，服务器端返回404，如果服务器端挂了返回500。 
4.断开TCP链接，四次挥手 
5.根据返回的数据加载内容，根据HTML文档从上到下的加载，遇到静态资源会去请求相应的静态资源，遇到js脚本文件，如果没有defer 或者async属性，则会被阻塞，待js被加载且执行后才能继续HTML文档的加载。根据加载生成DOM tree 和 stylesheet 
6.根据DOM树 和 stylesheet 生成布局树，为布局树分层，为每个图层绘制列表，将图表分成图块，紧接着光栅栏化将图块转化为位图，最后合成绘制页面  

# 浏览器如何渲染页面？
1、HTML被HTML解析器解析成DOM树。 
2、CSS被CSS解析器解析成CSS规则树。 
3、浏览器会将CSS规则树附着在DOM树上，并结合两者生成渲染树Render Tree。 
4、生成布局（flow），浏览器通过解析计算出每一个渲染树节点的位置和大小，在屏幕上画出渲染树的所有节点。 
5、将布局绘制（paint）在屏幕上，显示出整个页面 ... 展开  
  
# 浏览器垃圾回收机制？
1.标记清除算法。
2：引用计数算法。
标记清除算法就是执行前将所有的变量打上标记，执行完成后未被打上标记的变量就会当做垃圾回收。浏览器会隔一段时间进行一次标记清除标记清除算法的缺点：被释放的掉的内存空间是不连续的，之前一直占据内存的变量隔开，导致内存空间不连续，会出现分配不一的问题。
引用计数算法：就是对对象的引用次数进行增加或者减少，如果引用次数变为0，那么该对象分配的内存空间立即就会被清除掉。缺点就是会出现相互引用的情况。会导致对象一直被引用无法被清除 

